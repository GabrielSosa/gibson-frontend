"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[4320],{8851:function(e,n,t){var r=t(1413),a=t(93433),c=t(29439),i=t(72791),o=t(23922),s=t(9140),l=t(89743),u=t(2677),d=t(21827),p=t(18267),m=t(80184),h=(0,i.forwardRef)((function(e,n){var t=(0,i.useState)([]),h=(0,c.Z)(t,2),f=h[0],x=h[1];(0,i.useImperativeHandle)(n,(function(){return{clearFiles:function(){x([])}}}));var v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var t=1024,r=n<0?0:n,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,c)).toFixed(r))+" "+a[c]},g=function(e){var n=(0,a.Z)(f);n.splice(e,1),x(n)};return(0,i.useEffect)((function(){e.onFileUpload&&e.onFileUpload(f)}),[f,e]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.ZP,(0,r.Z)((0,r.Z)({},e),{},{useFsAccessApi:!1,onDrop:function(n){return function(n){var t,r=n;e.showPreview&&((n||[]).map((function(e,n){return Object.assign(e,{preview:"image"===e.type.split("/")[0]?URL.createObjectURL(e):null,formattedSize:v(e.size),newName:Date.now()+"_"+n+"."+e.name.split(".")[1]})})),(t=r=(0,a.Z)(f)).push.apply(t,(0,a.Z)(n)),x(r))}(n)},children:function(n){var t=n.getRootProps,a=n.getInputProps;return(0,m.jsx)("div",{className:"dropzone mb-3 mt-3",children:(0,m.jsxs)("div",(0,r.Z)((0,r.Z)({className:"dz-message needsclick"},t()),{},{children:[(0,m.jsx)("input",(0,r.Z)({},a())),(0,m.jsx)("i",{className:"h3 text-muted dripicons-cloud-upload"}),(0,m.jsx)("h4",{children:e.label||"Drop files here or click to upload."})]}))})}})),!e.multi&&f.length>0&&(0,m.jsx)("div",{children:(0,m.jsxs)(s.Z,{className:"mt-3 mb-3 shadow-none border charge-image-container",children:[(0,m.jsx)("div",{className:"remove",onClick:function(){return g(0)},children:(0,m.jsx)("i",{className:"mdi mdi-trash-can-outline"})}),(0,m.jsx)("img",{className:"charge-image",alt:f[0].name,src:f[0].preview})]})}),e.multi&&e.showPreview&&(0,m.jsx)("div",{className:"dropzone-previews",id:"uploadPreviewTemplate",children:(f||[]).map((function(e,n){return(0,m.jsx)(s.Z,{className:"mt-1 mb-0 shadow-none border",children:(0,m.jsx)("div",{className:"p-2",children:(0,m.jsxs)(l.Z,{className:"",children:[e.preview&&(0,m.jsx)(u.Z,{className:"col-auto",children:(0,m.jsx)("img",{"data-dz-thumbnail":"",className:"avatar rounded bg-light file-preview",alt:e.name,src:e.preview})}),!e.preview&&(0,m.jsx)(u.Z,{className:"col-auto",children:(0,m.jsx)("div",{className:"avatar-sm",children:(0,m.jsx)("span",{className:"avatar-title bg-primary rounded",children:e.type.split("/")[0]})})}),(0,m.jsxs)(u.Z,{className:"ps-0",children:[(0,m.jsxs)(d.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,m.jsx)(d.Z.Label,{children:"Descripcion"}),(0,m.jsx)(d.Z.Control,{required:!0,type:"text",placeholder:"Describe la foto aqui",onChange:function(n){x((0,a.Z)(f.map((function(t){return t.newName===e.newName&&(t.description=n.target.value),t}))))}})]}),(0,m.jsx)(o.rU,{to:"#",className:"text-muted fw-bold",children:e.newName}),(0,m.jsx)("p",{className:"mb-0",children:(0,m.jsx)("strong",{children:e.formattedSize})})]}),(0,m.jsx)(u.Z,{className:"text-end col-1",children:(0,m.jsx)(o.rU,{to:"#",className:"btn btn-link btn-lg text-muted shadow-none",children:(0,m.jsx)("i",{className:"dripicons-cross",onClick:function(){return g(n)}})})})]})})},n+"-file")}))})]})}));h.defaultProps={showPreview:!0},n.Z=h},13966:function(e,n,t){var r=t(29439),a=t(72791),c=t(39193),i=t(80184),o={display:"block",margin:"0 auto",borderColor:"red"};n.Z=function(e){var n=(0,a.useState)("#0351AA"),t=(0,r.Z)(n,1)[0];return(0,i.jsx)("div",{className:"container-loading",hidden:!e.loading,children:(0,i.jsx)(c.Z,{color:t,loading:e.loading,cssOverride:o,size:15})})}},9823:function(e,n,t){var r=t(1413),a=t(29439),c=t(45987),i=t(72791),o=t(99410),s=t(21827),l=t(81694),u=t.n(l),d=t(80184),p=["name","placeholder","refCallback","errors","control","register","className"],m=["type","name","placeholder","endIcon","register","errors","comp","rows","className","refCallback"],h=["type","label","name","placeholder","register","errors","comp","rows","className","refCallback"],f=["type","label","name","placeholder","register","errors","comp","className","children","refCallback"],x=["label","type","name","placeholder","endIcon","register","errors","control","className","labelClassName","containerClass","refCallback","children","action","rows"],v=function(e){var n=e.name,t=e.placeholder,l=e.refCallback,m=e.errors,h=(e.control,e.register),f=e.className,x=(0,c.Z)(e,p),v=(0,i.useState)(!1),g=(0,a.Z)(v,2),Z=g[0],j=g[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.Z,{className:"mb-0",children:[(0,d.jsx)(s.Z.Control,(0,r.Z)((0,r.Z)({type:Z?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){l&&l(e)},className:f,isInvalid:!(!m||!m[n])},h?h(n):{}),{},{autoComplete:n},x)),(0,d.jsx)("div",{className:u()("input-group-text","input-group-password",{"show-password":Z}),"data-password":Z?"true":"false",children:(0,d.jsx)("span",{className:"password-eye",onClick:function(){j(!Z)}})})]}),m&&m[n]?(0,d.jsx)(s.Z.Control.Feedback,{type:"invalid",className:"d-block",children:m[n].message}):null]})},g=function(e){var n=e.type,t=e.name,a=e.placeholder,i=e.endIcon,o=e.register,l=e.errors,u=e.comp,p=e.rows,h=e.className,f=e.refCallback,x=(0,c.Z)(e,m);return(0,d.jsx)(d.Fragment,{children:"password"===n&&i?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(v,(0,r.Z)({name:t,placeholder:a,refCallback:f,errors:l,register:o,className:h},x))}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z.Control,(0,r.Z)((0,r.Z)({type:n,placeholder:a,name:t,as:u,id:t,ref:function(e){f&&f(e)},className:h,isInvalid:!(!l||!l[t])},o?o(t):{}),{},{rows:p},x)),l&&l[t]?(0,d.jsx)(s.Z.Control.Feedback,{type:"invalid",className:"d-block",children:l[t].message}):null]})})},Z=function(e){var n=e.type,t=e.label,a=e.name,i=(e.placeholder,e.register),o=e.errors,l=(e.comp,e.rows,e.className),u=e.refCallback,p=(0,c.Z)(e,h);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z.Check,(0,r.Z)((0,r.Z)({type:n,label:t,name:a,id:a,ref:function(e){u&&u(e)},className:l,isInvalid:!(!o||!o[a])},i?i(a):{}),p)),o&&o[a]?(0,d.jsx)(s.Z.Control.Feedback,{type:"invalid",className:"d-block",children:o[a].message}):null]})},j=function(e){var n=e.type,t=e.label,a=e.name,i=(e.placeholder,e.register),o=e.errors,l=(e.comp,e.className),u=e.children,p=e.refCallback,m=(0,c.Z)(e,f);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z.Select,(0,r.Z)((0,r.Z)({type:n,label:t,name:a,id:a,ref:function(e){p&&p(e)},children:u,className:l,isInvalid:!(!o||!o[a])},i?i(a):{}),m)),o&&o[a]?(0,d.jsx)(s.Z.Control.Feedback,{type:"invalid",children:o[a].message}):null]})};n.Z=function(e){var n=e.label,t=e.type,a=e.name,i=e.placeholder,o=e.endIcon,l=e.register,u=e.errors,p=(e.control,e.className),m=e.labelClassName,h=e.containerClass,f=e.refCallback,v=e.children,b=e.action,y=e.rows,C=(0,c.Z)(e,x),N="textarea"===t?"textarea":"select"===t?"select":"input",k=void 0===o||o;return(0,d.jsx)(d.Fragment,{children:"hidden"===t?(0,d.jsx)("input",(0,r.Z)((0,r.Z)({type:t,name:a},l?l(a):{}),C)):(0,d.jsx)(d.Fragment,{children:"select"===t?(0,d.jsxs)(s.Z.Group,{className:h,children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z.Label,{className:m,children:n}),b&&b]}):null,(0,d.jsx)(j,(0,r.Z)({type:t,name:a,placeholder:i,refCallback:f,errors:u,register:l,comp:N,className:p,children:v},C))]}):(0,d.jsx)(d.Fragment,{children:"checkbox"===t||"radio"===t?(0,d.jsx)(s.Z.Group,{className:h,children:(0,d.jsx)(Z,(0,r.Z)({type:t,label:n,name:a,placeholder:i,refCallback:f,errors:u,register:l,comp:N,className:p,rows:y},C))}):(0,d.jsxs)(s.Z.Group,{className:h,children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z.Label,{className:m,children:n}),b&&b]}):null,(0,d.jsx)(g,(0,r.Z)({type:t,name:a,placeholder:i,endIcon:k,refCallback:f,errors:u,register:l,comp:N,className:p,rows:y},C))]})})})})}},95262:function(e,n,t){t.d(n,{y:function(){return s.Z},J:function(){return o}});var r=t(1413),a=t(72791),c=t(61134),i=t(80184),o=function(e){var n=e.defaultValues,t=e.resolver,o=e.children,s=e.onSubmit,l=e.formClass,u=(0,c.cI)({defaultValues:n,resolver:t}),d=u.handleSubmit,p=u.register,m=u.control,h=u.formState.errors;return(0,i.jsx)("form",{onSubmit:d(s),className:l,noValidate:!0,children:Array.isArray(o)?o.map((function(e){return e.props&&e.props.name?a.createElement(e.type,(0,r.Z)({},(0,r.Z)((0,r.Z)({},e.props),{},{register:p,key:e.props.name,errors:h,control:m}))):e})):o})},s=t(9823)},11796:function(e,n,t){t.d(n,{Qg:function(){return a},AL:function(){return l},Kk:function(){return c},lj:function(){return d},kO:function(){return o},Pl:function(){return p},T8:function(){return m},s_:function(){return i},AB:function(){return h},_0:function(){return f},NY:function(){return x},jv:function(){return v},hI:function(){return g},m4:function(){return s},iW:function(){return u}});var r=new(t(42738).u);function a(e){return r.get("".concat("/getEvaluationTemplate"),e)}function c(e){return r.get("".concat("/getNotes"),e)}function i(e){return r.get("".concat("/getDetails"),e)}function o(e){return r.get("".concat("/getAppraisal"),e)}function s(e){return r.get("".concat("/checkReference"),e)}function l(e){return r.create("".concat("/addNote"),e)}function u(e){return r.create("".concat("/editNote"),e)}function d(e){return r.create("".concat("/removeNote"),e)}function p(e){return r.create("".concat("/addDetail"),e)}function m(e){return r.create("".concat("/removeDetail"),e)}function h(e){return r.create("".concat("/startAppraisal"),e)}function f(e){return r.create("".concat("/endAppraisal"),e)}function x(e){return r.create("".concat("/saveAppraisal"),e)}function v(e){return r.create("".concat("/sendAppraisalEmail"),e)}function g(e){return r.create("".concat("/getAppraisalPDF"),e)}},3911:function(e,n,t){t.d(n,{v:function(){return a},U:function(){return c}});var r=new(t(42738).u);function a(e){return r.getCarApi("".concat("https://vpic.nhtsa.dot.gov/api/vehicles/getallmakes"),{format:"json"})}function c(e){var n="https://vpic.nhtsa.dot.gov/api/vehicles/GetModelsForMakeId/"+e;return r.getCarApi("".concat(n),{format:"json"})}},70751:function(e,n,t){t.d(n,{Bd:function(){return x},Z$:function(){return v},iI:function(){return m},p_:function(){return h},f9:function(){return f},qL:function(){return a},m5:function(){return c},h0:function(){return i},QS:function(){return s},MZ:function(){return l},ap:function(){return u},gB:function(){return d},fS:function(){return o},hm:function(){return p}});var r=new(t(42738).u);function a(e){return r.get("".concat("/invoices"),e)}function c(e){var n="/invoicesById/"+e;return r.get("".concat(n),{})}function i(e){return r.create("".concat("/invoices/validate"),e)}function o(e){return r.create("".concat("/invoices/cancel"),e)}function s(){return r.get("".concat("/getAllSarSetting"),{})}function l(){return r.get("".concat("/branches"),{})}function u(e){return r.create("".concat("/createBranch"),e)}function d(e){return r.create("".concat("/createSarSetting"),e)}function p(e){return r.create("".concat("/invoices/addExoneration"),e)}function m(e){return r.create("".concat("/invoices/addLine"),e)}function h(e){return r.create("".concat("/invoices/editLine"),e)}function f(e){return r.create("".concat("/invoices/removeLine"),e)}function x(e){return r.create("".concat("/invoices/sendEmail"),e)}function v(e){return r.create("".concat("/invoices/create"),e)}},90260:function(e,n,t){t.d(n,{wK:function(){return a},JL:function(){return i},sx:function(){return u},eb:function(){return o},DB:function(){return d},uG:function(){return c},qs:function(){return s},Sb:function(){return l}});var r=new(t(42738).u);function a(e){return r.create("".concat("/createCustomer"),e)}function c(e){return r.updatePatch("".concat("/updateCustomer"),e)}function i(e){return r.get("".concat("/getAllCustomers"),e)}function o(e){return r.get("".concat("/getAllAppraisal"),e)}function s(e){var n="/getByPlate/"+e.plate;return r.get("".concat(n),{})}function l(e){var n="/getByVin/"+e.vin;return r.get("".concat(n),{})}function u(e){return r.create("".concat("/reception"),e)}function d(e){return r.createWithFile("".concat("/uploadFile"),e)}},37893:function(e,n,t){t.d(n,{Ae:function(){return a},T$:function(){return c},c3:function(){return i},Mx:function(){return o},o_:function(){return s},cV:function(){return l},dI:function(){return u},Ug:function(){return d},lv:function(){return p},XU:function(){return m},Uy:function(){return h},Vg:function(){return f},kj:function(){return x},cn:function(){return v},Nq:function(){return g},Rf:function(){return Z},eR:function(){return j},_y:function(){return b},kZ:function(){return y},EW:function(){return C}});var r=new(t(42738).u);function a(e){return r.create("".concat("/vehicleType/create"),e)}function c(e){return r.updatePatch("".concat("/vehicleType/update"),e)}function i(e){return r.get("".concat("/vehicleTypes"),e)}function o(e){return r.updatePatch("".concat("/updateSarSetting"),e)}function s(e){return r.create("".concat("/updateBranch"),e)}function l(e){return r.get("".concat("/vehicleFields"),e)}function u(e){return r.get("".concat("/getVehicleTypeById"),e)}function d(e){return r.updatePatch("".concat("/evaluationItem/update"),e)}function p(e){return r.create("".concat("/evaluationItem/create"),e)}function m(e){return r.create("".concat("/evaluationList/create"),e)}function h(e){return r.updatePatch("".concat("/inspectionItem/update"),e)}function f(e){return r.create("".concat("/inspectionItem/create"),e)}function x(e){return r.create("".concat("/inspectionList/create"),e)}function v(e){return r.create("".concat("/user/create"),e)}function g(e){return r.updatePatch("".concat("/user/update"),e)}function Z(){return r.get("".concat("/users"),{})}function j(){return r.get("".concat("/userTypes"),{})}function b(e){return r.create("".concat("/insurer/create"),e)}function y(e){return r.updatePatch("".concat("/insurer/update"),e)}function C(){return r.get("".concat("/insurers"),{})}},80695:function(e,n,t){var r=t(1413),a=t(15861),c=t(29439),i=t(64687),o=t.n(i),s=t(95316),l=t(21827),u=t(43360),d=t(95262),p=t(61265),m=t(76863),h=t(90260),f=t(10623),x=t(72791),v=t(21830),g=t.n(v),Z=t(80184);n.Z=function(e){var n,t=e.customer,i=e.toggle,v=e.modal,j=e.action,b=(0,x.useState)([]),y=(0,c.Z)(b,2),C=y[0],N=y[1],k=(0,p.X)(m.Ry().shape({name:m.Z_().required("Por ingrese el nombre"),phone:m.Z_().min(8,"Debe ingresar al menos 8 numeros").required("Por favor ingrese el telefono"),mail:m.Z_().email()})),w=function(){return"edit"===j?"Editar":"Agregar"};return(0,Z.jsxs)(s.Z,{show:v,onHide:function(){i()},centered:!0,children:[(0,Z.jsx)(s.Z.Header,{closeButton:!0,children:(0,Z.jsxs)(s.Z.Title,{as:"h4",children:[w()," cliente"]})}),(0,Z.jsx)(s.Z.Body,{children:(0,Z.jsxs)(d.J,{onSubmit:function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={name:n.name,phone:n.phone,isExcent:n.is_excent||!1},!n.is_excent||""!==n.rtn){e.next=5;break}g().fire("Error","Por favor ingrese un RTN","error"),e.next=20;break;case 5:if(""!==n.rtn&&(a.rtn=n.rtn),""!==n.identity&&(a.identity=n.identity),C.length>0&&(a.email=C.join(",")),"edit"!==j){e.next=16;break}return 1===a.isExcent||a.isExcent?a.isExcent=!0:a.isExcent=!1,a.customer_id=t.customer_id,e.next=13,(0,h.uG)(a);case 13:c=e.sent,e.next=19;break;case 16:return e.next=18,(0,h.wK)(a);case 18:c=e.sent;case 19:200===c.data.meta.code?(g().fire("Exito","Cliente guardado correctamente","success"),i((0,r.Z)((0,r.Z)({},n),{},{customer_id:c.data.data.customerId}))):g().fire("Error",c.data.data.error.message,"error");case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),resolver:k,defaultValues:(0,r.Z)({},t),children:[(0,Z.jsx)(d.y,{label:"Nombre",type:"text",name:"name",placeholder:"Ingrese el nombre",containerClass:"mb-3"}),(0,Z.jsx)(d.y,{label:"Telefono",type:"text",name:"phone",placeholder:"Ingrese el telefono",containerClass:"mb-3"}),(0,Z.jsx)(d.y,{label:"Numero de identidad",type:"text",name:"identity",placeholder:"Ingrese el numero de identidad",containerClass:"mb-3"}),(0,Z.jsx)(d.y,{label:"RTN",type:"text",name:"rtn",placeholder:"Ingrese el RTN",containerClass:"mb-3"}),(0,Z.jsx)(d.y,{label:"\xbfEs exonerado?",type:"checkbox",name:"is_excent",containerClass:"mb-3"}),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(l.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,Z.jsx)(l.Z.Label,{children:"Correos"}),(0,Z.jsx)(f.B,{value:null===(n=t.email)||void 0===n?void 0:n.split(",").filter((function(e){return""!==e})),onChange:N,name:"emails",placeHolder:"Agregue correos"})]})}),(0,Z.jsx)(u.Z,{variant:"primary",className:"waves-effect waves-light me-1 rounded-pill",type:"submit",children:w()}),(0,Z.jsx)(u.Z,{variant:"light",className:"waves-effect waves-light rounded-pill",onClick:function(){i()},children:"Cancelar"})]})})]})}},31953:function(e,n,t){t.d(n,{n:function(){return r}});var r={customer_id:0,name:"",identity:"",phone:"",created_date:new Date,isExcent:!1}},44320:function(e,n,t){t.r(n);var r=t(1413),a=t(93433),c=t(15861),i=t(29439),o=t(64687),s=t.n(o),l=t(72791),u=t(51649),d=t(97637),p=t(89743),m=t(2677),h=t(9140),f=t(21827),x=t(80695),v=t(31953),g=t(13587),Z=t.n(g),j=t(23922),b=t(21830),y=t.n(b),C=t(85066),N=t(90260),k=t(8851),w=t(3911),_=t(70751),I=t(37893),S=t(13966),B=t(11796),A=t(80184),F=function(e,n){var t=(0,l.useState)(!1),r=(0,i.Z)(t,2),a=r[0],o=r[1],u=(0,C.s0)();return(0,A.jsxs)(j.rU,{to:"#",onClick:function(){var n={reference:""===e.data.reference&&!e.data.purpose.includes("repair"),brand:""===e.data.brand,model:""===e.data.model,year:""===e.data.year,plate:0!==e.data.plate.length&&8!==e.data.plate.length&&7!==e.data.plate.length,vehicleTypeSelected:!e.data.vehicle_type_id,mainCustomer:!e.data.main_customer_id,insurance_id:!!e.data.purpose.includes("insurance")&&!e.data.insurance_id};e.setValidations(n);var t=!1;Object.keys(n).forEach((function(e){n[e]&&(t=!0)})),t?y().fire("Error!","Por favor complete los campos","error").then((function(){})):y().fire({title:"\xbfEstas seguro de agregar el registro?",text:"Se guardara el registro y se creara una factura!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28bb4b",cancelButtonColor:"#f34e4e",confirmButtonText:"Si, Crear!"}).then(function(){var n=(0,c.Z)(s().mark((function n(t){var r,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isConfirmed){n.next=16;break}return o(!0),r=[],n.next=5,e.selectedFiles.reduce(function(){var e=(0,c.Z)(s().mark((function e(n,t){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.next=4,(0,N.DB)({file:t,description:t.description,name:t.newName});case 4:return 200===(a=e.sent).data.meta.code&&r.push(a.data.data),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Promise.resolve());case 5:return e.data.allUps=r,e.data.insurance_id||delete e.data.insurance_id,e.data.guarantyFor&&""!==e.data.guarantyFor||(e.data.guarantyFor="N/A"),""===e.data.invoiceId&&delete e.data.invoiceId,e.data.reference||(e.data.reference="N/A"),0===e.data.plate.length&&(e.data.plate="NO PORTA PLACA"),n.next=13,(0,N.sx)(e.data);case 13:a=n.sent,o(!1),200===a.data.meta.code?y().fire("Creado!","Se creo una factura para el cliente con identificador: "+a.data.data.invoiceId,"success").then((function(){u("/appraisal/invoice-detail/"+a.data.data.invoiceId,{replace:!0})})):y().fire("Error!",a.data.meta.message,"error").then((function(){}));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){"Invalid request payload input"===e&&y().fire("Error!","Hubo un error al guardar","error").then((function(){}))}))},className:"btn btn-blue rounded-pill w-md waves-effect waves-light mb-3",children:[(0,A.jsx)(S.Z,{loading:a}),(0,A.jsx)("i",{className:"mdi mdi-content-save me-1"}),"Guardar"]})};n.default=function(){var e=(0,l.useState)(""),n=(0,i.Z)(e,2),t=n[0],o=n[1],g=(0,l.useState)([]),j=(0,i.Z)(g,2),b=j[0],C=j[1],S=(0,l.useState)([]),E=(0,i.Z)(S,2),P=E[0],L=E[1],R=(0,l.useState)(""),T=(0,i.Z)(R,2),G=T[0],V=T[1],M=(0,l.useState)(""),D=(0,i.Z)(M,2),q=D[0],U=D[1],O=(0,l.useState)(""),K=(0,i.Z)(O,2),Y=K[0],z=K[1],J=(0,l.useState)(!1),H=(0,i.Z)(J,2),W=H[0],$=H[1],Q=(0,l.useState)(!1),X=(0,i.Z)(Q,1)[0],ee=(0,l.useState)({buysell:!1,agency:!1,guaranty:!1,repair:!1,insurance:!1}),ne=(0,i.Z)(ee,2),te=ne[0],re=ne[1],ae=(0,l.useState)(""),ce=(0,i.Z)(ae,2),ie=ce[0],oe=ce[1],se=(0,l.useState)("card"),le=(0,i.Z)(se,2),ue=le[0],de=le[1],pe=(0,l.useState)(""),me=(0,i.Z)(pe,2),he=me[0],fe=me[1],xe=(0,l.useState)(""),ve=(0,i.Z)(xe,2),ge=ve[0],Ze=ve[1],je=(0,l.useState)(""),be=(0,i.Z)(je,2),ye=be[0],Ce=be[1],Ne=(0,l.useState)([]),ke=(0,i.Z)(Ne,2),we=ke[0],_e=ke[1],Ie=(0,l.useState)({}),Se=(0,i.Z)(Ie,2),Be=Se[0],Ae=Se[1],Fe=(0,l.useState)(""),Ee=(0,i.Z)(Fe,2),Pe=Ee[0],Le=Ee[1],Re=(0,l.useState)(""),Te=(0,i.Z)(Re,2),Ge=Te[0],Ve=Te[1],Me=(0,l.useState)([]),De=(0,i.Z)(Me,2),qe=De[0],Ue=De[1],Oe=(0,l.useState)(0),Ke=(0,i.Z)(Oe,2),Ye=Ke[0],ze=Ke[1],Je=(0,l.useState)([{id:1,value:1,name:"Ficohsa"},{id:2,value:2,name:"Otros"}]),He=(0,i.Z)(Je,2),We=He[0],$e=He[1],Qe=(0,l.useState)(v.n),Xe=(0,i.Z)(Qe,2),en=Xe[0],nn=Xe[1],tn=(0,l.useState)([]),rn=(0,i.Z)(tn,2),an=rn[0],cn=rn[1],on=(0,l.useState)([]),sn=(0,i.Z)(on,2),ln=sn[0],un=sn[1],dn=(0,l.useState)([]),pn=(0,i.Z)(dn,2),mn=pn[0],hn=pn[1],fn=(0,l.useState)([]),xn=(0,i.Z)(fn,2),vn=xn[0],gn=xn[1],Zn=(0,l.useState)([]),jn=(0,i.Z)(Zn,2),bn=jn[0],yn=jn[1],Cn=(0,l.useState)([]),Nn=(0,i.Z)(Cn,2),kn=Nn[0],wn=Nn[1];(0,u.Tt)({title:"Recepci\xf3n",breadCrumbItems:[{path:"/appraisal/reception",label:"Avaluos"},{path:"/appraisal/reception",label:"Recepci\xf3n",active:!0}]});var _n=function(){var e=(0,c.Z)(s().mark((function e(n,t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn();case 2:n&&(C([].concat((0,a.Z)(b),[(0,r.Z)((0,r.Z)({},n),{},{id:b.length+1,value:b.length+1})])),L([(0,r.Z)((0,r.Z)({},n),{},{id:b.length+1,value:b.length+1})]),V(n.phone)),$(!W);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),In=function(e){e.length>0?(hn(e),En(e[0].Make_ID),wn([])):hn([])},Sn=function(e){e.length>0?wn(e):wn([])},Bn=function(){var e=(0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.JL)({});case 2:n=e.sent,C(n.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),An=function(){var e=(0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.EW)();case 2:n=e.sent,$e(n.data.data.map((function(e){return{id:e.insurer_id,value:e.insurer_id,name:e.name}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fn=function(){var e=(0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.v)({});case 2:n=e.sent,un(n.data.Results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),En=function(){var e=(0,c.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.U)(n);case 2:t=e.sent,yn(t.data.Results);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Pn=function(){var e=(0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.c3)({});case 2:n=e.sent,gn(n.data.data.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{status_color:"success"})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){Bn(),Fn(),Pn(),An()}),[]),(0,l.useEffect)((function(){var e=0;Object.keys(te).forEach((function(n){te[n]&&e++})),ze(e)}),[te]);var Ln=function(){var e=(0,c.Z)(s().mark((function e(){var n,t,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===ie){e.next=21;break}return e.next=3,(0,_.m5)(ie);case 3:if(n=e.sent,"draft"===(t=n.data.data).status){e.next=11;break}return oe(""),e.next=9,y().fire({title:"Factura inv\xe1lida",text:"Esta factura no es valida para adjuntar un avaluo",icon:"error"});case 9:e.next=21;break;case 11:L([b.find((function(e){return e.customer_id===t.customer_id}))]),V(t.customer.phone),de(t.type),a=(0,r.Z)({},te),t.lastAppraisal.purposes.split(",").forEach((function(e){a[e]=!0})),re(a),Le(t.lastAppraisal.report_name),U(t.lastAppraisal.report_phone),Ve(t.lastAppraisal.vehicle_name),z(t.lastAppraisal.vehicle_phone);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{style:{marginTop:"70px"},children:(0,A.jsx)(m.Z,{lg:12,children:(0,A.jsx)(h.Z,{children:(0,A.jsxs)(h.Z.Body,{children:[(0,A.jsx)("h4",{className:"header-title",children:"Informacion Personal"}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(m.Z,{lg:6,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Vincular factura (opcional)"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",value:ie,onChange:function(e){oe(e.target.value)},onBlur:function(e){Ln()}})]})})}),(0,A.jsxs)(f.Z,{noValidate:!0,validated:X,children:[(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom02",children:[(0,A.jsx)(f.Z.Label,{children:"Proposito"}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){re((0,r.Z)((0,r.Z)({},te),{},{buysell:e.target.checked}))},checked:te.buysell,disabled:!te.buysell&&3===Ye,type:"checkbox",id:"buysell",name:"customRadio",label:"Compra/Venta"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){re((0,r.Z)((0,r.Z)({},te),{},{agency:e.target.checked}))},checked:te.agency,disabled:!te.agency&&3===Ye,type:"checkbox",id:"agency",name:"customRadio",label:"Agencia"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){re((0,r.Z)((0,r.Z)({},te),{},{guaranty:e.target.checked}))},checked:te.guaranty,disabled:!te.guaranty&&3===Ye,type:"checkbox",id:"guaranty",name:"customRadio",label:"Garantia"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){re((0,r.Z)((0,r.Z)({},te),{},{repair:e.target.checked}))},checked:te.repair,disabled:!te.repair&&3===Ye,type:"checkbox",id:"repair",name:"customRadio",label:"Reparacion"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){re((0,r.Z)((0,r.Z)({},te),{},{insurance:e.target.checked}))},checked:te.insurance,disabled:!te.insurance&&3===Ye,type:"checkbox",id:"insurance",name:"customRadio",label:"Seguros"})})]})]}),te.insurance&&(0,A.jsxs)(f.Z.Group,{className:"",controlId:"validationCustom03",children:[(0,A.jsx)(f.Z.Label,{children:"Seguro de"}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:(0,A.jsx)(d.pY,{id:"insuranceId",labelKey:"name",multiple:!1,isValid:!!we[0],isInvalid:Be.insuranceFrom||!1,maxResults:4,onChange:function(e){e.length>0&&_e(e)},options:We,onBlur:function(){Ae((0,r.Z)((0,r.Z)({},Be),{},{insuranceFrom:!we[0]}))},allowNew:!1,placeholder:"Escoge un banco..."})})})]}),te.guaranty&&(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Garant\xeda para"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",placeholder:"Jhon Doe",onChange:function(e){fe(e.target.value)}})]}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:6,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Solicitante"}),(0,A.jsx)(d.pY,{id:"customer",labelKey:"name",multiple:!1,isValid:!!P[0],isInvalid:Be.mainCustomer||!1,maxResults:4,onChange:function(e){e.length>0&&e[0].customOption?(nn((0,r.Z)((0,r.Z)({},en),{},{name:e[0].name})),_n(void 0,"main")):e.length>0?(L(e),V(e[0].phone)):(V(""),L([]))},options:b,onBlur:function(){Ae((0,r.Z)((0,r.Z)({},Be),{},{mainCustomer:!P[0]}))},allowNew:!0,placeholder:"Escoge o crea un cliente...",selected:P})]})}),(0,A.jsxs)(m.Z,{lg:6,children:[(0,A.jsx)(f.Z.Label,{children:"Telefono"}),(0,A.jsx)(Z(),{mask:[/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholder:"____-____",value:G,className:"form-control "+(""===G?"":8===G.length?"is-valid":"is-invalid")})]})]}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:6,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Entregar informe a"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",value:Pe,isValid:""!==Pe,isInvalid:Be.reportName||!1,placeholder:"Jhon Doe",onChange:function(e){Le(e.target.value)}})]})}),(0,A.jsxs)(m.Z,{lg:6,children:[(0,A.jsx)(f.Z.Label,{children:"Telefono"}),(0,A.jsx)(Z(),{mask:[/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholder:"____-____",value:q,onChange:function(e){U(e.target.value)},className:"form-control "+(""===q?"":9===q.length?"is-valid":"is-invalid")})]})]}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:6,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Entregar vehiculo a"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",value:Ge,isValid:""!==Ge,isInvalid:Be.vehicleName||!1,placeholder:"Jhon Doe",onChange:function(e){Ve(e.target.value)}})]})}),(0,A.jsxs)(m.Z,{lg:6,children:[(0,A.jsx)(f.Z.Label,{children:"Telefono"}),(0,A.jsx)(Z(),{mask:[/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholder:"____-____",value:Y,onChange:function(e){z(e.target.value)},className:"form-control "+(""===Y?"":9===Y.length?"is-valid":"is-invalid")})]})]}),(0,A.jsx)("h4",{className:"header-title",children:"Informacion de factura"}),(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom02",children:[(0,A.jsx)(f.Z.Label,{children:"Metodo de pago"}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){de(e.target.id)},checked:"cash"===ue,type:"radio",id:"cash",name:"customRadio5",label:"Efectivo"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){de(e.target.id)},checked:"card"===ue,type:"radio",id:"card",name:"customRadio5",label:"Tarjeta"})}),(0,A.jsx)(m.Z,{lg:3,children:(0,A.jsx)(f.Z.Check,{onChange:function(e){de(e.target.id)},checked:"credit"===ue,type:"radio",id:"credit",name:"customRadio5",label:"Credito"})})]})]})]}),(0,A.jsx)(x.Z,{customer:en,modal:W,toggle:_n})]})})})}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:12,children:(0,A.jsx)(h.Z,{children:(0,A.jsxs)(h.Z.Body,{children:[(0,A.jsx)("h4",{className:"header-title",children:"Informacion Del Veh\xedculo"}),(0,A.jsxs)(f.Z,{noValidate:!0,validated:X,children:[(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Tipo de vehiculo"}),(0,A.jsx)(d.pY,{id:"vehicleType",labelKey:"name",multiple:!1,maxResults:4,onChange:function(e){e.length>0?cn(e):cn([])},options:vn,placeholder:"Escoge un tipo de vehiculo",selected:an,isValid:!!an[0],isInvalid:Be.vehicleTypeSelected||!1,onBlur:function(){Ae((0,r.Z)((0,r.Z)({},Be),{},{vehicleTypeSelected:!an[0]}))}})]})}),(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Certificado/Orden de trabajo"}),(0,A.jsx)(f.Z.Control,{value:t,required:!0,type:"text",isValid:""!==t,isInvalid:Be.reference||!1,placeholder:"12345",onChange:function(){var e=(0,c.Z)(s().mark((function e(n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.target.value.match("^[0-9-]+$")){e.next=14;break}return o(n.target.value),e.next=4,(0,B.m4)({ref:n.target.value});case 4:if(200!==(a=e.sent).data.meta.code){e.next=12;break}if(a.data.data){e.next=10;break}Ae((0,r.Z)((0,r.Z)({},Be),{},{reference:""===n.target.value&&!te.repair})),e.next=12;break;case 10:return e.next=12,y().fire({title:"Ya se registraron certificados con ese codigo",text:"Porfavor verifique el n\xfamero",icon:"warning",showCancelButton:!0,cancelButtonColor:"#f34e4e"});case 12:e.next=15;break;case 14:o(t);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}),(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Placa"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",isValid:""!==ye,isInvalid:Be.plate||!1,placeholder:"AAA 0000",onChange:function(){var e=(0,c.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae((0,r.Z)((0,r.Z)({},Be),{},{plate:0!==n.target.value.length&&8!==n.target.value.length&&7!==n.target.value.length})),Ce(n.target.value);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onBlur:function(){var e=(0,c.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(8!==ye.length){e.next=9;break}return e.next=3,(0,N.qs)({plate:ye});case 3:if(!(t=e.sent).data.data.vehicle_id){e.next=9;break}return e.next=7,y().fire({title:"Ya existe un vehiculo con esta placa",text:"\xbfDesea rellenar la inormacion con el vehiculo encontrado?",icon:"info",showCancelButton:!0,confirmButtonColor:"#28bb4b",cancelButtonColor:"#f34e4e",confirmButtonText:"Si, Rellenar!"});case 7:e.sent.isConfirmed&&(r=t.data.data,In([{Make_Name:r.brand,Make_ID:999999}]),Sn([{Model_Name:r.model,Model_ID:999999}]),Ze(r.year));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})})]}),(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Marca"}),(0,A.jsx)(d.pY,{id:"brand",labelKey:"Make_Name",multiple:!1,maxResults:4,options:ln,allowNew:!0,isValid:!!mn[0],isInvalid:Be.brand||!1,onChange:In,placeholder:"Escoge una marca...",selected:mn,onBlur:function(){Ae((0,r.Z)((0,r.Z)({},Be),{},{brand:!mn[0]}))}})]})}),(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"Modelo"}),(0,A.jsx)(d.pY,{id:"model",labelKey:"Model_Name",multiple:!1,maxResults:4,options:bn,allowNew:!0,isValid:!!kn[0],isInvalid:Be.model||!1,onChange:Sn,placeholder:"Escoge un modelo...",selected:kn,onBlur:function(){Ae((0,r.Z)((0,r.Z)({},Be),{},{brand:!kn[0]}))}})]})}),(0,A.jsx)(m.Z,{lg:4,children:(0,A.jsxs)(f.Z.Group,{className:"mb-3",controlId:"validationCustom01",children:[(0,A.jsx)(f.Z.Label,{children:"A\xf1o"}),(0,A.jsx)(f.Z.Control,{required:!0,type:"text",value:ge,isValid:""!==ge,isInvalid:Be.year||!1,placeholder:"2012",onChange:function(e){Ae((0,r.Z)((0,r.Z)({},Be),{},{year:""===e.target.value})),Ze(e.target.value)}})]})})]})]})]})})}),(0,A.jsx)(m.Z,{lg:12,children:(0,A.jsx)(h.Z,{children:(0,A.jsxs)(h.Z.Body,{children:[(0,A.jsx)("h4",{className:"header-title",children:"Sube Anexos"}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(m.Z,{lg:12,children:(0,A.jsx)(k.Z,{label:"Cargar fotos como anexos al ingreso del vehiculo",showPreview:!0,multi:!0,onFileUpload:function(e){Ue(e)}})})})]})})})]}),(0,A.jsx)(p.Z,{className:"sticky-buttons",children:(0,A.jsx)(m.Z,{children:(0,A.jsx)(F,{setValidations:Ae,data:{main_customer_id:!!P[0]&&P[0].customer_id,reportName:Pe,reportPhone:q,vehicleName:Ge,vehiclePhone:Y,purpose:Object.keys(te).filter((function(e){return te[e]})).map((function(e){return e})).join(","),insurance_id:!!we[0]&&we[0].id,vehicle_type_id:!!an[0]&&an[0].vehicle_type_id,plate:ye,brand:!!mn[0]&&mn[0].Make_Name,model:!!kn[0]&&kn[0].Model_Name,year:ge,paymentMethod:ue,reference:t,guarantyFor:he,invoiceId:ie},selectedFiles:qe})})})]})}}}]);
//# sourceMappingURL=4320.72bd91c7.chunk.js.map