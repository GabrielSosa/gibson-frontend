"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[3371],{13966:function(e,n,t){var r=t(29439),a=t(72791),c=t(39193),i=t(80184),s={display:"block",margin:"0 auto",borderColor:"red"};n.Z=function(e){var n=(0,a.useState)("#0351AA"),t=(0,r.Z)(n,1)[0];return(0,i.jsx)("div",{className:"container-loading",hidden:!e.loading,children:(0,i.jsx)(c.Z,{color:t,loading:e.loading,cssOverride:s,size:15})})}},9823:function(e,n,t){var r=t(1413),a=t(29439),c=t(45987),i=t(72791),s=t(99410),o=t(21827),l=t(81694),u=t.n(l),d=t(80184),p=["name","placeholder","refCallback","errors","control","register","className"],f=["type","name","placeholder","endIcon","register","errors","comp","rows","className","refCallback"],m=["type","label","name","placeholder","register","errors","comp","rows","className","refCallback"],h=["type","label","name","placeholder","register","errors","comp","className","children","refCallback"],g=["label","type","name","placeholder","endIcon","register","errors","control","className","labelClassName","containerClass","refCallback","children","action","rows"],v=function(e){var n=e.name,t=e.placeholder,l=e.refCallback,f=e.errors,m=(e.control,e.register),h=e.className,g=(0,c.Z)(e,p),v=(0,i.useState)(!1),x=(0,a.Z)(v,2),y=x[0],w=x[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(s.Z,{className:"mb-0",children:[(0,d.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:y?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){l&&l(e)},className:h,isInvalid:!(!f||!f[n])},m?m(n):{}),{},{autoComplete:n},g)),(0,d.jsx)("div",{className:u()("input-group-text","input-group-password",{"show-password":y}),"data-password":y?"true":"false",children:(0,d.jsx)("span",{className:"password-eye",onClick:function(){w(!y)}})})]}),f&&f[n]?(0,d.jsx)(o.Z.Control.Feedback,{type:"invalid",className:"d-block",children:f[n].message}):null]})},x=function(e){var n=e.type,t=e.name,a=e.placeholder,i=e.endIcon,s=e.register,l=e.errors,u=e.comp,p=e.rows,m=e.className,h=e.refCallback,g=(0,c.Z)(e,f);return(0,d.jsx)(d.Fragment,{children:"password"===n&&i?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(v,(0,r.Z)({name:t,placeholder:a,refCallback:h,errors:l,register:s,className:m},g))}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:n,placeholder:a,name:t,as:u,id:t,ref:function(e){h&&h(e)},className:m,isInvalid:!(!l||!l[t])},s?s(t):{}),{},{rows:p},g)),l&&l[t]?(0,d.jsx)(o.Z.Control.Feedback,{type:"invalid",className:"d-block",children:l[t].message}):null]})})},y=function(e){var n=e.type,t=e.label,a=e.name,i=(e.placeholder,e.register),s=e.errors,l=(e.comp,e.rows,e.className),u=e.refCallback,p=(0,c.Z)(e,m);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z.Check,(0,r.Z)((0,r.Z)({type:n,label:t,name:a,id:a,ref:function(e){u&&u(e)},className:l,isInvalid:!(!s||!s[a])},i?i(a):{}),p)),s&&s[a]?(0,d.jsx)(o.Z.Control.Feedback,{type:"invalid",className:"d-block",children:s[a].message}):null]})},w=function(e){var n=e.type,t=e.label,a=e.name,i=(e.placeholder,e.register),s=e.errors,l=(e.comp,e.className),u=e.children,p=e.refCallback,f=(0,c.Z)(e,h);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z.Select,(0,r.Z)((0,r.Z)({type:n,label:t,name:a,id:a,ref:function(e){p&&p(e)},children:u,className:l,isInvalid:!(!s||!s[a])},i?i(a):{}),f)),s&&s[a]?(0,d.jsx)(o.Z.Control.Feedback,{type:"invalid",children:s[a].message}):null]})};n.Z=function(e){var n=e.label,t=e.type,a=e.name,i=e.placeholder,s=e.endIcon,l=e.register,u=e.errors,p=(e.control,e.className),f=e.labelClassName,m=e.containerClass,h=e.refCallback,v=e.children,j=e.action,Z=e.rows,b=(0,c.Z)(e,g),N="textarea"===t?"textarea":"select"===t?"select":"input",k=void 0===s||s;return(0,d.jsx)(d.Fragment,{children:"hidden"===t?(0,d.jsx)("input",(0,r.Z)((0,r.Z)({type:t,name:a},l?l(a):{}),b)):(0,d.jsx)(d.Fragment,{children:"select"===t?(0,d.jsxs)(o.Z.Group,{className:m,children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z.Label,{className:f,children:n}),j&&j]}):null,(0,d.jsx)(w,(0,r.Z)({type:t,name:a,placeholder:i,refCallback:h,errors:u,register:l,comp:N,className:p,children:v},b))]}):(0,d.jsx)(d.Fragment,{children:"checkbox"===t||"radio"===t?(0,d.jsx)(o.Z.Group,{className:m,children:(0,d.jsx)(y,(0,r.Z)({type:t,label:n,name:a,placeholder:i,refCallback:h,errors:u,register:l,comp:N,className:p,rows:Z},b))}):(0,d.jsxs)(o.Z.Group,{className:m,children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z.Label,{className:f,children:n}),j&&j]}):null,(0,d.jsx)(x,(0,r.Z)({type:t,name:a,placeholder:i,endIcon:k,refCallback:h,errors:u,register:l,comp:N,className:p,rows:Z},b))]})})})})}},95262:function(e,n,t){t.d(n,{y:function(){return o.Z},J:function(){return s}});var r=t(1413),a=t(72791),c=t(61134),i=t(80184),s=function(e){var n=e.defaultValues,t=e.resolver,s=e.children,o=e.onSubmit,l=e.formClass,u=(0,c.cI)({defaultValues:n,resolver:t}),d=u.handleSubmit,p=u.register,f=u.control,m=u.formState.errors;return(0,i.jsx)("form",{onSubmit:d(o),className:l,noValidate:!0,children:Array.isArray(s)?s.map((function(e){return e.props&&e.props.name?a.createElement(e.type,(0,r.Z)({},(0,r.Z)((0,r.Z)({},e.props),{},{register:p,key:e.props.name,errors:m,control:f}))):e})):s})},o=t(9823)},11796:function(e,n,t){t.d(n,{Qg:function(){return a},AL:function(){return l},Kk:function(){return c},lj:function(){return d},kO:function(){return s},Pl:function(){return p},T8:function(){return f},s_:function(){return i},AB:function(){return m},_0:function(){return h},NY:function(){return g},jv:function(){return v},hI:function(){return x},m4:function(){return o},iW:function(){return u}});var r=new(t(42738).u);function a(e){return r.get("".concat("/getEvaluationTemplate"),e)}function c(e){return r.get("".concat("/getNotes"),e)}function i(e){return r.get("".concat("/getDetails"),e)}function s(e){return r.get("".concat("/getAppraisal"),e)}function o(e){return r.get("".concat("/checkReference"),e)}function l(e){return r.create("".concat("/addNote"),e)}function u(e){return r.create("".concat("/editNote"),e)}function d(e){return r.create("".concat("/removeNote"),e)}function p(e){return r.create("".concat("/addDetail"),e)}function f(e){return r.create("".concat("/removeDetail"),e)}function m(e){return r.create("".concat("/startAppraisal"),e)}function h(e){return r.create("".concat("/endAppraisal"),e)}function g(e){return r.create("".concat("/saveAppraisal"),e)}function v(e){return r.create("".concat("/sendAppraisalEmail"),e)}function x(e){return r.create("".concat("/getAppraisalPDF"),e)}},3911:function(e,n,t){t.d(n,{v:function(){return a},U:function(){return c}});var r=new(t(42738).u);function a(e){return r.getCarApi("".concat("https://vpic.nhtsa.dot.gov/api/vehicles/getallmakes"),{format:"json"})}function c(e){var n="https://vpic.nhtsa.dot.gov/api/vehicles/GetModelsForMakeId/"+e;return r.getCarApi("".concat(n),{format:"json"})}},90260:function(e,n,t){t.d(n,{wK:function(){return a},JL:function(){return i},sx:function(){return u},eb:function(){return s},DB:function(){return d},uG:function(){return c},qs:function(){return o},Sb:function(){return l}});var r=new(t(42738).u);function a(e){return r.create("".concat("/createCustomer"),e)}function c(e){return r.updatePatch("".concat("/updateCustomer"),e)}function i(e){return r.get("".concat("/getAllCustomers"),e)}function s(e){return r.get("".concat("/getAllAppraisal"),e)}function o(e){var n="/getByPlate/"+e.plate;return r.get("".concat(n),{})}function l(e){var n="/getByVin/"+e.vin;return r.get("".concat(n),{})}function u(e){return r.create("".concat("/reception"),e)}function d(e){return r.createWithFile("".concat("/uploadFile"),e)}},37893:function(e,n,t){t.d(n,{Ae:function(){return a},T$:function(){return c},c3:function(){return i},Mx:function(){return s},o_:function(){return o},cV:function(){return l},dI:function(){return u},Ug:function(){return d},lv:function(){return p},XU:function(){return f},Uy:function(){return m},Vg:function(){return h},kj:function(){return g},cn:function(){return v},Nq:function(){return x},Rf:function(){return y},eR:function(){return w},_y:function(){return j},kZ:function(){return Z},EW:function(){return b}});var r=new(t(42738).u);function a(e){return r.create("".concat("/vehicleType/create"),e)}function c(e){return r.updatePatch("".concat("/vehicleType/update"),e)}function i(e){return r.get("".concat("/vehicleTypes"),e)}function s(e){return r.updatePatch("".concat("/updateSarSetting"),e)}function o(e){return r.create("".concat("/updateBranch"),e)}function l(e){return r.get("".concat("/vehicleFields"),e)}function u(e){return r.get("".concat("/getVehicleTypeById"),e)}function d(e){return r.updatePatch("".concat("/evaluationItem/update"),e)}function p(e){return r.create("".concat("/evaluationItem/create"),e)}function f(e){return r.create("".concat("/evaluationList/create"),e)}function m(e){return r.updatePatch("".concat("/inspectionItem/update"),e)}function h(e){return r.create("".concat("/inspectionItem/create"),e)}function g(e){return r.create("".concat("/inspectionList/create"),e)}function v(e){return r.create("".concat("/user/create"),e)}function x(e){return r.updatePatch("".concat("/user/update"),e)}function y(){return r.get("".concat("/users"),{})}function w(){return r.get("".concat("/userTypes"),{})}function j(e){return r.create("".concat("/insurer/create"),e)}function Z(e){return r.updatePatch("".concat("/insurer/update"),e)}function b(){return r.get("".concat("/insurers"),{})}},51691:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(1413),a=t(15861),c=t(29439),i=t(64687),s=t.n(i),o=t(72791),l=t(43360),u=t(11796),d=t(95316),p=t(95262),f=t(61265),m=t(76863),h=t(80184),g=function(e){var n=e.data,t=e.toggle,c=e.modal,i=(e.mode,(0,f.X)(m.Ry().shape({})));return(0,h.jsxs)(d.Z,{show:c,onHide:function(){t()},centered:!0,children:[(0,h.jsx)(d.Z.Header,{closeButton:!0,children:(0,h.jsxs)(d.Z.Title,{as:"h4",children:[n.apraisal_note_id?"Editar":"Agregar"," nota"]})}),(0,h.jsx)(d.Z.Body,{children:(0,h.jsxs)(p.J,{onSubmit:function(){var e=(0,a.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.description,n.price);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),resolver:i,defaultValues:(0,r.Z)({},n),children:[(0,h.jsx)(p.y,{label:"Descripcion",type:"text",name:"description",placeholder:"Ingrese descripcion de la nota",containerClass:"mb-3"}),(0,h.jsx)(p.y,{label:"Precio",type:"text",name:"price",placeholder:"Ingrese el precio",containerClass:"mb-3"}),(0,h.jsx)(l.Z,{variant:"primary",className:"waves-effect waves-light me-1 rounded-pill",type:"submit",children:"Guardar"}),(0,h.jsx)(l.Z,{variant:"light",className:"waves-effect waves-light rounded-pill",onClick:function(){t()},children:"Cancelar"})]})})]})},v=t(21830),x=t.n(v),y=function(e){var n=(0,o.useState)(!1),t=(0,c.Z)(n,2),i=t[0],d=t[1],p=(0,o.useState)(""),f=(0,c.Z)(p,2),m=f[0],v=f[1],y=(0,o.useState)(!1),w=(0,c.Z)(y,2),j=w[0],Z=w[1],b=(0,o.useState)({}),N=(0,c.Z)(b,2),k=N[0],C=N[1],I=(0,o.useState)([]),E=(0,c.Z)(I,2),_=E[0],B=E[1],A=(0,o.useState)([]),F=(0,c.Z)(A,2),S=F[0],T=F[1];function P(e,n){var t=e.getBoundingClientRect(),r=n.clientX-t.left,a=n.clientY-t.top;e.addingNote&&(C({posx:r,posy:a}),z()),""!==e.addingDetail&&L(e.addingDetail,{posx:r,posy:a},e.vector)}(0,o.useEffect)((function(){e.vehicleType&&R(e.vehicleType)}),[e.vehicleType]);var R=function(){var n=(0,a.Z)(s().mark((function n(t){var r,c,i,o,l,d,p;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r="vector"===(t||e.vehicleType)||!t&&!e.vehicleType?window.location.origin+"/vehicles/sedan.png":t||e.vehicleType,c=document.getElementById("canvas"),(i=c.getContext("2d")).clearRect(0,0,c.width,c.height),c.width=700,c.height=700,o=document.getElementById("canvas_bars"),(l=o.getContext("2d")).clearRect(0,0,o.width,o.height),o.width=700,o.height=100,(d=new Image).src=r,d.onload=(0,a.Z)(s().mark((function n(){var t,r,a,o,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=c.width/d.width,r=c.height/d.height,a=Math.min(t,r),i.drawImage(d,0,0,d.width,d.height,0,0,d.width*a,d.height*a),n.next=6,(0,u.s_)({appraisalId:e.appraisalId});case 6:return 200===(o=n.sent).data.meta.code&&T(o.data.phisycDetails),n.next=10,(0,u.Kk)({appraisalId:e.appraisalId});case 10:200===(l=n.sent).data.meta.code?B(l.data.notes):x().fire("Error",l.data.data.error.message,"error");case 12:case"end":return n.stop()}}),n)}))),(p=new Image).src=window.location.origin+"/svg/barras.png",p.onload=(0,a.Z)(s().mark((function e(){var n,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.width/p.width,t=o.height/p.height,r=Math.min(n,t),l.drawImage(p,0,0,p.width,p.height,0,0,p.width*r,p.height*r);case 4:case"end":return e.stop()}}),e)})));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),D=(0,o.useCallback)((function(e){P(document.getElementById("canvas"),e)}),[]);(0,o.useEffect)((function(){var n=document.getElementById("canvas");n.addingNote=i,n.addingDetail=m,n.vector=e.vehicleType,i||""!==m?(n.style.cursor="crosshair",n.addEventListener("mousedown",D)):(n.style.cursor="default",n.removeEventListener("mousedown",D))}),[i,m]);var z=function(){var n=(0,a.Z)(s().mark((function n(t,a){var c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Z(!j),!t){n.next=16;break}if(c={},k.apraisal_note_id){n.next=9;break}return n.next=6,(0,u.AL)((0,r.Z)((0,r.Z)({},k),{},{description:t,price:""===a?0:a||0,appraisalId:e.appraisalId}));case 6:c=n.sent,n.next=15;break;case 9:return k.appraisalNoteId=k.apraisal_note_id,delete k.apraisal_note_id,delete k.appraisal_id,n.next=14,(0,u.iW)((0,r.Z)((0,r.Z)({},k),{},{description:t,price:""===a?0:a||0}));case 14:c=n.sent;case 15:200===c.data.meta.code?R(e.vehicleType):x().fire("Error",c.data.data.error.message,"error");case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),L=function(){var n=(0,a.Z)(s().mark((function n(t,a,c){var i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.Pl)((0,r.Z)((0,r.Z)({},a),{},{type:t,appraisalId:e.appraisalId}));case 2:200===(i=n.sent).data.meta.code?R(c):x().fire("Error",i.data.data.error.message,"error");case 4:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();(0,o.useEffect)((function(){!function(){var e=document.getElementById("canvas").getContext("2d"),n=0;_.forEach((function(t){n++,e.beginPath(),e.arc(t.posx+1.5,t.posy+2.5,15,0,2*Math.PI,!1),e.fillStyle="rgba(255, 0, 0, 0.8)",e.fill(),e.lineWidth=2,e.strokeStyle="white",e.stroke(),e.font="bold 20px Arial",e.fillStyle="white",e.fillText(n,t.posx-3.5,t.posy+10)}))}(),function(){var e=document.getElementById("canvas").getContext("2d"),n=document.getElementById("canvas_bars").getContext("2d");S.forEach((function(t){var r=new Image;r.onload=function(){"Oxido"===t.type?e.drawImage(r,t.posx-5,t.posy-5,10,10):"Bar"===t.type?n.drawImage(r,t.posx-5,t.posy-5,10,10):e.drawImage(r,t.posx-7,t.posy-7,18,18)},r.src=window.location.origin+"/svg/"+t.type+".svg"}))}()}),[_]);var G=function(e,n){return Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))},V=function(){var e=(0,a.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.T8)({detailId:n});case 2:200===(t=e.sent).data.meta.code?R():x().fire("Error",t.data.data.error.message,"error");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("div",{className:"image-draw",children:(0,h.jsx)("canvas",{id:"canvas_bars",onClick:function(n){if(e.allowEdit){var t=document.getElementById("canvas_bars"),r=t.getBoundingClientRect(),a=n.clientX-r.left,c=n.clientY-r.top,i=!1;S.forEach((function(e){if("Bar"===e.type&&G({x:a,y:c},{x:e.posx,y:e.posy})<15)return V(e.appraisal_phisycs_detail_id),i=!0,!0})),i||(t.addingDetail="Bar",P(t,n))}}})}),(0,h.jsxs)("div",{className:"tool-bar",hidden:!e.allowEdit,children:[(0,h.jsx)(l.Z,{variant:"outline-success",className:"rounded-pill waves-effect waves-light",hidden:i||""!==m,size:"sm",onClick:function(){d(!i)},children:"Agregar nota"}),(0,h.jsxs)(l.Z,{hidden:i||""!==m,size:"sm",variant:"outline-success",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){v("Oxido")},children:["Oxido ",(0,h.jsx)("i",{className:"dripicons-dot"})]}),(0,h.jsxs)(l.Z,{hidden:i||""!==m,size:"sm",variant:"outline-success",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){v("Rajado")},children:["Rajado ",(0,h.jsx)("i",{className:"ti-bolt-alt"})]}),(0,h.jsxs)(l.Z,{hidden:i||""!==m,size:"sm",variant:"outline-success",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){v("Quebrado")},children:["Quebrado ",(0,h.jsx)("i",{className:"dripicons-cross"})]}),(0,h.jsxs)(l.Z,{hidden:i||""!==m,size:"sm",variant:"outline-success",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){v("Rayado")},children:["Rayado ",(0,h.jsx)("i",{className:"dripicons-checkmark"})]}),(0,h.jsxs)(l.Z,{hidden:i||""!==m,size:"sm",variant:"outline-success",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){v("Golpeado")},children:["Golpeado ",(0,h.jsx)("i",{className:"dripicons-media-record"})]}),(0,h.jsx)(l.Z,{hidden:!i&&""===m,size:"sm",variant:"outline-danger",className:"rounded-pill waves-effect waves-light ms-1",onClick:function(){d(!1),v("")},children:"Cancelar"})]}),(0,h.jsx)("div",{className:"image-draw",children:(0,h.jsx)("canvas",{id:"canvas",onClick:function(n){if(e.allowEdit){var t=document.getElementById("canvas");if(!i&&""===m){var r=t.getBoundingClientRect(),a=n.clientX-r.left,c=n.clientY-r.top;S.forEach((function(e){if(G({x:a,y:c},{x:e.posx,y:e.posy})<15)return V(e.appraisal_phisycs_detail_id),!0}))}}}})}),(0,h.jsx)("h3",{children:"Notas"}),(0,h.jsx)("table",{className:"notes",children:(0,h.jsx)("tbody",{children:_.map((function(n,t){return(0,h.jsxs)("tr",{className:"note-item",children:[(0,h.jsxs)("td",{children:[t+1,".-"]}),(0,h.jsx)("td",{children:n.description}),(0,h.jsxs)("td",{className:"text-end",children:["L. ",(n.price||0).toFixed(2)]}),(0,h.jsxs)("td",{children:[(0,h.jsx)(l.Z,{className:"ms-2",size:"sm",variant:"outline-info",disabled:!e.allowEdit,onClick:(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(n),z();case 2:case"end":return e.stop()}}),e)}))),children:(0,h.jsx)("i",{className:"fas fa-edit"})}),(0,h.jsx)(l.Z,{className:"ms-2",size:"sm",variant:"outline-danger",disabled:!e.allowEdit,onClick:(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.lj)({noteId:n.apraisal_note_id});case 2:200===(t=e.sent).data.meta.code?R():x().fire("Error",t.data.data.error.message,"error");case 4:case"end":return e.stop()}}),e)}))),children:(0,h.jsx)("i",{className:"fas fa-trash"})})]})]},t+"45")}))})})]}),(0,h.jsx)(g,{toggle:z,modal:j,data:k})]})}}}]);
//# sourceMappingURL=3371.ca8da877.chunk.js.map